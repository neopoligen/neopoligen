[!- import "macros.neojinja" as theme -!]
<section 
[@ theme.section_attrs(site, page_id, section, ["code_default_section", "raw_section", "flow"]) -@]
>

    [! include "subsections/forward.neojinja" !]

    <div class="heading_subsection">
        <h3 class="title_subsection">
        [! if section.content.key_value_attributes.title !]
            [@ section.content.key_value_attributes.title @]
        [! else !]
            [! if section.content.flag_attributes[0] !]
                [@ section.content.flag_attributes[0] @]
            [! else !]
                Code
            [! endif !]
        [! endif !]
        </h3>
        [! if section.content.key_value_attributes.subtitle !]
            <div class="subtitle_subsection">[@ section.content.key_value_attributes.subtitle @]</div>
        [! endif !]
    </div>

    [! include "subsections/preface.neojinja" !]

    <div class="content_subsection flow">
        [! autoescape false !]
        [! if section.content.flag_attributes[0] !]
        [@ highlight_code(section.content.category.content.text, section.content.flag_attributes[0]) @]
        [! else !]
        [@ highlight_code(section.content.category.content.text, "txt") @]
        [! endif !]
        [! endautoescape !]
    </div>

    <code-block>
        <x-title>Code</x-title>
        <x-code>
        [! autoescape false !]
        [! if section.content.flag_attributes[0] !]
        [@ highlight_code(section.content.category.content.text, section.content.flag_attributes[0]) @]
        [! else !]
        [@ highlight_code(section.content.category.content.text, "txt") @]
        [! endif !]
        [! endautoescape !]
        </x-code>
    </code-block>

    [! include "subsections/afterword.neojinja" !]
